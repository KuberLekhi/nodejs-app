const sqlite3 = require('sqlite3').verbose();

// Connect to the SQLite database
const db = new sqlite3.Database('mydatabase.db', (err) => {
    if (err) {
        console.error('Error connecting to the database:', err.message);
    } else {
        console.log('Connected to the database.');
    }
});

// Sample data - replace these values with actual data generated by your app
const temperature = 23.5;
const humidity = 45.0;

// Insert data into the `data` table
const insertData = (temperature, humidity) => {
    db.run(
        `INSERT INTO data (temperature, humidity) VALUES (?, ?)`,
        [temperature, humidity],
        function (err) {
            if (err) {
                return console.error('Error inserting data:', err.message);
            }
            console.log(`Data inserted with ID: ${this.lastID}`);
        }
    );
};

// Call the function to insert data immediately after it's generated
insertData(temperature, humidity);

// Close the database connection
db.close((err) => {
    if (err) {
        console.error('Error closing the database:', err.message);
    } else {
        console.log('Database connection closed.');
    }
});
